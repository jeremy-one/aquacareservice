---
import Button from '../Button.astro';

// Placeholder projects - will be replaced with real images
const projects = [
  {
    id: 1,
    title: 'Villa Méditerranéenne',
    location: 'Saint-Tropez',
    category: 'Construction',
    color: 'var(--color-primary-400)',
  },
  {
    id: 2,
    title: 'Résidence Le Parc',
    location: 'Toulon',
    category: 'Rénovation',
    color: 'var(--color-secondary-400)',
  },
  {
    id: 3,
    title: 'Mas Provençal',
    location: 'Hyères',
    category: 'Construction',
    color: 'var(--color-primary-500)',
  },
  {
    id: 4,
    title: 'Bastide du Soleil',
    location: 'Fréjus',
    category: 'Construction',
    color: 'var(--color-secondary-500)',
  },
  {
    id: 5,
    title: 'Domaine des Pins',
    location: 'Sainte-Maxime',
    category: 'Rénovation',
    color: 'var(--color-primary-600)',
  },
  {
    id: 6,
    title: 'Villa Azur',
    location: 'Bandol',
    category: 'Construction',
    color: 'var(--color-secondary-600)',
  },
];
---

<section class="portfolio section-lg" id="realisations">
  <div class="container">
    <!-- Section header -->
    <div class="portfolio__header">
      <div class="portfolio__header-content">
        <span class="portfolio__label" data-animate="fade-up">Nos réalisations</span>
        <h2 class="portfolio__title" data-animate="fade-up" data-delay="100">
          Des projets qui font
          <span class="text-gradient">des vagues</span>
        </h2>
      </div>
      <div class="portfolio__header-action" data-animate="fade-up" data-delay="200">
        <Button href="/realisations" variant="outline">
          Voir toutes nos réalisations
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <line x1="5" y1="12" x2="19" y2="12"/>
            <polyline points="12 5 19 12 12 19"/>
          </svg>
        </Button>
      </div>
    </div>

    <!-- Portfolio grid -->
    <div class="portfolio__grid">
      {projects.map((project, index) => (
        <article
          class="project-card"
          data-animate="fade-up"
          data-delay={`${(index % 3) * 100}`}
          style={`--project-color: ${project.color}`}
        >
          <div class="project-card__image">
            <!-- Placeholder visual -->
            <div class="project-card__placeholder">
              <svg viewBox="0 0 400 300" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <rect width="400" height="300" fill="var(--project-color)"/>
                <rect x="60" y="80" width="280" height="140" rx="16" fill="rgba(255,255,255,0.3)"/>
                <path d="M80 140 Q140 120, 200 140 T320 140" stroke="rgba(255,255,255,0.4)" stroke-width="3" fill="none"/>
                <path d="M80 170 Q140 150, 200 170 T320 170" stroke="rgba(255,255,255,0.3)" stroke-width="3" fill="none"/>
                <circle cx="340" cy="60" r="30" fill="rgba(255,255,255,0.2)"/>
              </svg>
            </div>
            <div class="project-card__overlay">
              <span class="project-card__view">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <circle cx="11" cy="11" r="8"/>
                  <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                  <line x1="11" y1="8" x2="11" y2="14"/>
                  <line x1="8" y1="11" x2="14" y2="11"/>
                </svg>
                Voir le projet
              </span>
            </div>
          </div>
          <div class="project-card__content">
            <span class="project-card__category">{project.category}</span>
            <h3 class="project-card__title">{project.title}</h3>
            <p class="project-card__location">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                <circle cx="12" cy="10" r="3"/>
              </svg>
              {project.location}
            </p>
          </div>
        </article>
      ))}
    </div>
  </div>
</section>

<style>
  .portfolio {
    background: var(--color-gray-50);
  }

  /* Header */
  .portfolio__header {
    display: flex;
    flex-direction: column;
    gap: var(--space-6);
    margin-bottom: var(--space-12);
  }

  @media (min-width: 768px) {
    .portfolio__header {
      flex-direction: row;
      justify-content: space-between;
      align-items: flex-end;
    }
  }

  .portfolio__header-content {
    max-width: 500px;
  }

  .portfolio__label {
    display: inline-block;
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--color-primary-600);
    text-transform: uppercase;
    letter-spacing: var(--tracking-wider);
    margin-bottom: var(--space-4);
  }

  .portfolio__title {
    font-size: var(--text-4xl);
    color: var(--color-gray-900);
  }

  /* Grid */
  .portfolio__grid {
    display: grid;
    gap: var(--space-6);
  }

  @media (min-width: 640px) {
    .portfolio__grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .portfolio__grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  /* Project card */
  .project-card {
    position: relative;
    background: var(--color-white);
    border-radius: var(--radius-2xl);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
    transition: transform var(--duration-normal) var(--ease-out),
                box-shadow var(--duration-normal) var(--ease-out);
    cursor: pointer;
  }

  .project-card:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-xl);
  }

  .project-card__image {
    position: relative;
    aspect-ratio: 4/3;
    overflow: hidden;
  }

  .project-card__placeholder {
    width: 100%;
    height: 100%;
  }

  .project-card__placeholder svg {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .project-card__overlay {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity var(--duration-normal) var(--ease-out);
  }

  .project-card:hover .project-card__overlay {
    opacity: 1;
  }

  .project-card__view {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    color: var(--color-white);
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    padding: var(--space-3) var(--space-5);
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
    border-radius: var(--radius-full);
    transform: translateY(10px);
    transition: transform var(--duration-normal) var(--ease-out);
  }

  .project-card:hover .project-card__view {
    transform: translateY(0);
  }

  .project-card__view svg {
    width: 18px;
    height: 18px;
  }

  .project-card__content {
    padding: var(--space-5);
  }

  .project-card__category {
    display: inline-block;
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    color: var(--color-primary-600);
    text-transform: uppercase;
    letter-spacing: var(--tracking-wider);
    margin-bottom: var(--space-2);
  }

  .project-card__title {
    font-size: var(--text-lg);
    font-weight: var(--font-bold);
    color: var(--color-gray-900);
    margin-bottom: var(--space-2);
  }

  .project-card__location {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-sm);
    color: var(--color-gray-500);
  }

  .project-card__location svg {
    width: 14px;
    height: 14px;
  }
</style>
