---
import BaseLayout from '../layouts/BaseLayout.astro';
import PageHero from '../components/sections/PageHero.astro';
import CTA from '../components/sections/CTA.astro';

const title = 'Contact & devis entretien piscine – Golfe de Saint-Tropez | Aquacare';
const description = 'Devis d\'entretien, diagnostic, équipements. Contact WhatsApp direct. Zone : Saint-Tropez, Ramatuelle, Gassin, Grimaud, Sainte-Maxime, Cogolin…';

const cities = [
  'Sainte-Maxime', 'Plan-de-la-Tour', 'Grimaud', 'Cogolin',
  'Saint-Tropez', 'Ramatuelle', 'Cavalaire', 'La Croix-Valmer',
  'Les Issambres', 'Saint-Aygulf', 'Roquebrune-sur-Argens',
  'Puget-sur-Argens', 'Fréjus', 'Saint-Raphaël', 'Le Muy',
];

const infos = [
  'Votre commune',
  'Taille approximative du bassin',
  '1 photo du local technique',
  'Votre besoin (contrat / sel / pH / chauffage / rénovation)',
];
---

<BaseLayout title={title} description={description} darkHero>
  <!-- Hero -->
  <PageHero
    title="Contact & devis"
    subtitle="Une question, un devis, un diagnostic ? Écrivez directement à Florent et son équipe sur WhatsApp : vous obtiendrez une réponse sous 72h."
  />

  <!-- Section principale : formulaire + infos -->
  <section class="contact-main">
    <div class="contact-main__container container">
      <div class="contact-main__grid">
        <!-- Gauche : Formulaire -->
        <div class="contact-main__form-col">
          <h2 class="contact-main__form-title">Envoyez-nous un message</h2>
          <form class="contact-form" id="contact-form">
            <div class="contact-form__field">
              <label for="name" class="contact-form__label">Nom</label>
              <input type="text" id="name" name="name" class="contact-form__input" required autocomplete="name" />
            </div>
            <div class="contact-form__field">
              <label for="phone" class="contact-form__label">Téléphone</label>
              <input type="tel" id="phone" name="phone" class="contact-form__input" autocomplete="tel" />
            </div>
            <div class="contact-form__field">
              <label for="city" class="contact-form__label">Ville</label>
              <input type="text" id="city" name="city" class="contact-form__input" autocomplete="address-level2" />
            </div>
            <div class="contact-form__field">
              <label for="message" class="contact-form__label">Message</label>
              <textarea id="message" name="message" rows="5" class="contact-form__input contact-form__textarea" required></textarea>
            </div>
            <button type="submit" class="contact-form__submit btn btn--primary">
              <span>Envoyer</span>
            </button>
          </form>
        </div>

        <!-- Droite : WhatsApp + infos -->
        <div class="contact-main__info-col">
          <!-- WhatsApp CTA -->
          <div class="contact-main__whatsapp-block">
            <h3 class="contact-main__info-title">Contact rapide</h3>
            <p class="contact-main__info-text">
              Réponse en 72h, devis clair et sans engagement.
            </p>
            <a href="https://wa.me/" class="contact-main__whatsapp" target="_blank" rel="noopener noreferrer">
              <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
              </svg>
              <span>Nous contacter sur WhatsApp</span>
            </a>
          </div>

          <!-- Infos à fournir -->
          <div class="contact-main__infos-block">
            <h3 class="contact-main__info-title">Quelles informations fournir ?</h3>
            <ul class="contact-main__infos-list">
              {infos.map((info) => (
                <li>{info}</li>
              ))}
            </ul>
          </div>

          <!-- Coordonnées -->
          <div class="contact-main__coords-block">
            <h3 class="contact-main__info-title">Coordonnées</h3>
            <div class="contact-main__coords">
              <a href="mailto:contact@aquacareservice.fr" class="contact-main__coord-link">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                  <path d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                </svg>
                contact@aquacareservice.fr
              </a>
              <p class="contact-main__coord-text">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                  <path d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                  <path d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                </svg>
                Var (83), France
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Zone d'intervention -->
  <section class="contact-zone">
    <div class="contact-zone__container container">
      <span class="contact-zone__label">Zone d'intervention</span>
      <h2 class="contact-zone__title">Notre <span class="text-water">zone d'intervention</span> dans le Var (83)</h2>

      <div class="contact-zone__cities">
        {cities.map((city) => (
          <span class="contact-zone__city">
            <span class="contact-zone__city-dot"></span>
            {city}
          </span>
        ))}
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <CTA
    title="Besoin d'un renseignement ?"
    text="Contactez-nous via WhatsApp pour une réponse rapide :"
    listItems={[
      'Votre commune',
      'Votre besoin (entretien / rénovation / équipement)',
      'Une photo du local technique si possible',
    ]}
    faqTitle="Vos questions sur nos <span class='text-water'>prestations</span>"
    faqs={[
      {
        question: 'Intervenez-vous en urgence pour un dépannage de piscine ?',
        answer: 'Nous faisons notre maximum pour répondre rapidement aux situations urgentes (panne de filtration, eau verte avant un événement, problème technique bloquant), mais notre capacité d\'intervention dépend de notre planning et de la période.',
      },
      {
        question: 'Proposez-vous vos services aux conciergeries et agences de location saisonnière ?',
        answer: 'Nous privilégions les contrats avec des particuliers propriétaires, notamment de résidences secondaires dans le Golfe de Saint-Tropez. Cependant, nous pouvons étudier au cas par cas les demandes de conciergeries ou d\'agences de location saisonnière.',
      },
      {
        question: 'Comment se passe la première prise de contact ?',
        answer: 'La démarche est simple et rapide. Vous nous contactez via WhatsApp en nous transmettant quelques informations essentielles : votre commune, la taille approximative de votre bassin, une photo de votre local technique et votre besoin principal. Florent ou un membre de l\'équipe vous répond sous 72 heures.',
      },
    ]}
  />
</BaseLayout>

<style>
  /* ═══════════════════════════════════════════
     SECTION PRINCIPALE
     ═══════════════════════════════════════════ */
  .contact-main {
    padding-block: var(--section-gap);
    background: var(--color-light);
  }

  .contact-main__grid {
    display: grid;
    gap: var(--space-12);
  }

  @media (min-width: 1024px) {
    .contact-main__grid {
      grid-template-columns: 1fr 1fr;
      gap: var(--space-16);
    }
  }

  /* Form */
  .contact-main__form-col {
    display: flex;
    flex-direction: column;
    gap: var(--space-6);
  }

  .contact-main__form-title {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--color-dark);
  }

  .contact-form {
    display: flex;
    flex-direction: column;
    gap: var(--space-5);
  }

  .contact-form__field {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
  }

  .contact-form__label {
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--color-gray-700);
  }

  .contact-form__input {
    padding: var(--space-3) var(--space-4);
    font-family: var(--font-body);
    font-size: var(--text-base);
    color: var(--color-dark);
    background: var(--color-white);
    border: 1px solid var(--color-gray-300);
    border-radius: var(--radius-lg);
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
  }

  .contact-form__input:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
  }

  .contact-form__textarea {
    resize: vertical;
    min-height: 120px;
  }

  .contact-form__submit {
    width: fit-content;
    margin-top: var(--space-2);
  }

  /* Info column */
  .contact-main__info-col {
    display: flex;
    flex-direction: column;
    gap: var(--space-8);
  }

  .contact-main__whatsapp-block,
  .contact-main__infos-block,
  .contact-main__coords-block {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
  }

  .contact-main__info-title {
    font-size: var(--text-lg);
    font-weight: var(--font-bold);
    color: var(--color-dark);
  }

  .contact-main__info-text {
    font-size: var(--text-base);
    color: var(--color-gray-600);
    line-height: var(--leading-relaxed);
  }

  .contact-main__whatsapp {
    display: inline-flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-4) var(--space-8);
    background: #25D366;
    color: white;
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    border-radius: var(--radius-full);
    box-shadow: 0 8px 30px rgba(37, 211, 102, 0.3);
    transition: transform 0.3s var(--ease-out-expo), box-shadow 0.3s ease;
    width: fit-content;
  }

  .contact-main__whatsapp:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 40px rgba(37, 211, 102, 0.4);
  }

  .contact-main__whatsapp svg {
    width: 24px;
    height: 24px;
  }

  .contact-main__infos-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
  }

  .contact-main__infos-list li {
    font-size: var(--text-base);
    color: var(--color-gray-600);
    padding-left: var(--space-6);
    position: relative;
    line-height: var(--leading-relaxed);
  }

  .contact-main__infos-list li::before {
    content: '';
    position: absolute;
    left: 0;
    top: 10px;
    width: 8px;
    height: 8px;
    background: var(--color-primary);
    border-radius: 50%;
  }

  .contact-main__coords {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
  }

  .contact-main__coord-link,
  .contact-main__coord-text {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-base);
    color: var(--color-gray-600);
    transition: color 0.3s ease;
  }

  .contact-main__coord-link:hover {
    color: var(--color-primary);
  }

  .contact-main__coord-link svg,
  .contact-main__coord-text svg {
    color: var(--color-primary);
    flex-shrink: 0;
  }

  /* ═══════════════════════════════════════════
     ZONE D'INTERVENTION
     ═══════════════════════════════════════════ */
  .contact-zone {
    padding-block: var(--section-gap);
    background: var(--color-dark);
    position: relative;
  }

  .contact-zone::before {
    content: '';
    position: absolute;
    inset: 0;
    background:
      repeating-linear-gradient(100deg, transparent 0%, rgba(14, 165, 233, 0.03) 10%, transparent 20%),
      repeating-linear-gradient(80deg, transparent 0%, rgba(14, 165, 233, 0.02) 15%, transparent 30%);
    pointer-events: none;
  }

  .contact-zone__container {
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: var(--space-8);
  }

  .contact-zone__label {
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    text-transform: uppercase;
    letter-spacing: 0.2em;
    color: var(--color-logo-teal);
  }

  .contact-zone__title {
    font-size: clamp(1.5rem, 4vw, 2.5rem);
    font-weight: var(--font-bold);
    line-height: var(--leading-tight);
    color: var(--color-white);
    max-width: 700px;
  }

  .contact-zone__cities {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: var(--space-3);
    max-width: 800px;
  }

  .contact-zone__city {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-4);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: rgba(255, 255, 255, 0.8);
    border-radius: var(--radius-full);
    background: rgba(255, 255, 255, 0.1);
    transition: all 0.3s ease;
  }

  .contact-zone__city:hover {
    color: var(--color-white);
    background: var(--color-primary);
  }

  .contact-zone__city-dot {
    width: 5px;
    height: 5px;
    background: var(--color-primary);
    border-radius: 50%;
    flex-shrink: 0;
  }

  .contact-zone__city:hover .contact-zone__city-dot {
    background: var(--color-white);
  }
</style>
